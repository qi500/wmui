/**
 * [wmui v2.1.5]
 * Date:2020-06-14
 * Email：<1796627261@qq.com>
 * Author：侠客来
 */
(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){var c=b();c.__esModule=true;c["default"]=c;module.exports=c}else{a.wmui=b()}}}(this,function(){var wmui={replaceNotesCode:function(content){return content.replace(/(?:^|\n|\r)\s*\/\*[\s\S]*?\*\/\s*(?:\r|\n|$)/g,"\n").replace(/(?:^|\n|\r)\s*\/\/.*(?:\r|\n|$)/g,"\n").replace(/<!--(.|[\r\n])*?-->/g," ")},parseComponent:function(url,content,options){if(!content){throw Error("content is null.")}if(!options){options={}}var template=content.match(/(<template.*?>)[\s\S]*?(<\/template>)/gmi);var html="";if(template!=null&&template.length>0){for(var i=0;i<template.length;i++){html+=template[i].replace(/^(<template.*?>)+|(<\/template>)+$/gmi,"")}}var stylesone=content.match(/(<style.*?>)[\s\S]*?(<\/style>)/gmi);var style="";if(stylesone!=null&&stylesone.length>0){var randomStr="data-v-"+this.randomStr(8);var stylesone_str="";for(var i=0;i<stylesone.length;i++){var parseTemplateStyles=this.parseTemplateStyles(randomStr,stylesone[i],style,html);style=parseTemplateStyles.style;html=parseTemplateStyles.html}}if(style){var index=html.lastIndexOf("</");if(index!==-1){html=html.substr(0,index)+style+html.substr(index)}}options.template=html;contents=this.replaceNotesCode(content);var scriptsone=contents.match(/(<script.*?>)[\s\S]*?(<\/script>)/gmi);var script="";if(scriptsone!=null&&scriptsone.length>0){for(var i=0;i<scriptsone.length;i++){script+=scriptsone[i].replace(/^(<script.*?>)+|(<\/script>)+$/gmi,"")}}var scripttxt_options=this.parseimports(script,options);var oldscript=script;scripttxt=scripttxt_options.scripttxt;options=scripttxt_options.options;var edmheadstrRegExp=/(export.*?default.*{[\s\S]*};)+|(module\.exports.*\=.*{[\s\S]*};)+|(exports.*\=.*{[\s\S]*};)+|(export.*?default.*{[\s\S]*})+|(module\.exports.*\=.*{[\s\S]*})+|(exports.*\=.*{[\s\S]*})/gmi;var edmheadstr=scripttxt.replace(edmheadstrRegExp,"").replace(/(^\s*)|(\s*$)/g,"");if(edmheadstr!=null&&edmheadstr.length>0){var edmheadstrs=edmheadstr.replace(/import [\s\S]*? from (['"])(?:(?!\1).)*?\1\;/gmi,"").replace(/import (['"])(?:(?!\1).)*?\1\;/gmi,"").replace(/(^\s*)|(\s*$)/g,"");if(edmheadstrs!=null&&edmheadstrs.length>0){this.errorMessage(url,edmheadstrs,edmheadstrs);this.loadJsCode(edmheadstrs)}}var scriptstrtxts=scripttxt.match(edmheadstrRegExp);if(scriptstrtxts!=null&&scriptstrtxts.length>0){scriptstrtxts=scriptstrtxts.join("");script="("+/{[\s\S]*}/gmi.exec(scriptstrtxts)+")";this.errorMessage(url,script,scriptstrtxts);var obj=(new Function("return "+script+""))();for(var prop in obj){options[prop]=obj[prop]}}return options},errorMessage:function(url,script,edmheadstrs){var _this=this;function errorinfo(){_this.throwException(url,edmheadstrs);return script}eval(errorinfo())},throwException:function(url,edmheadstrs){window.onerror=function(errorMessage,scriptURI,lineNumber,columnNumber,errorObj){var log="\n"+"error-messages："+errorMessage+"\n";var errstr=edmheadstrs.split("\n");log+="error-file-url："+url+"\n";log+="error-msg-info："+errorObj+"\n";if(errstr[lineNumber-4]!=undefined){log+="error-position："+"\n"+errstr[lineNumber-4]+"\n"+errstr[lineNumber-3]+"\n"+errstr[lineNumber-2]+"\n"+errstr[lineNumber-1]+"\n"}else{if(errstr[lineNumber-3]!=undefined){log+="error-position："+"\n"+errstr[lineNumber-3]+"\n"+errstr[lineNumber-2]+"\n"+errstr[lineNumber-1]+"\n"}else{if(errstr[lineNumber-2]!=undefined){log+="error-position："+"\n"+errstr[lineNumber-2]+"\n"+errstr[lineNumber-1]+"\n"}else{log+="error-position："+"\n"+errstr[lineNumber-1]+"\n"}}}console.error(log);return true}},randomStr:function(len){len=len||32;var $chars="abcdefhijkmnprstwxyz123456780";var maxPos=$chars.length;var pwd="";for(i=0;i<len;i++){pwd+=$chars.charAt(Math.floor(Math.random()*maxPos))}return pwd},parseTemplateStyles:function(randomStr,stylesonei,style,html){stylesone_str=stylesonei.replace(/^(<style.*?>)+|(<\/style>)+$/gmi,"");var stylesonestrAttrs=stylesonei.match(/<style[^>]*>/gmi);if(stylesonestrAttrs!=null&&stylesonestrAttrs.length>0){stylesonestrAttrs=stylesonestrAttrs[0].replace(/^(<style)+|(>)+$/gmi,"")}else{stylesonestrAttrs=""}if(stylesone_str.length>0){var styles_classlist=stylesone_str.match(/.*?\{/gmi);if(stylesonestrAttrs.toLowerCase().indexOf("scoped")>-1&&styles_classlist!=null&&styles_classlist.length>0){stylesone_str=this.parseStyles(styles_classlist,stylesone_str,randomStr);html=this.parseTemplates(html,randomStr)}style+="<component :is=\"'style'\"";style+=stylesonestrAttrs;style+=">";style+=stylesone_str;style+="</component>\r\n"}return{style:style,html:html}},parseStyles:function(styles_classlist,stylesone_str,randomStr){for(var scti=0;scti<styles_classlist.length;scti++){var classItemName=styles_classlist[scti].replace(/\{/gmi,"");var classItemNamekey=classItemName.split(",");if(classItemNamekey.length>1){for(var cink=0;cink<classItemNamekey.length;cink++){var classItemNameRegExp=new RegExp("\\"+classItemNamekey[cink],"");stylesone_str=stylesone_str.replace(classItemNameRegExp,classItemNamekey[cink]+"["+randomStr+"] ")
}}else{var classItemNameRegExp=new RegExp(classItemName+"{+|"+classItemName+"\\s+{","");stylesone_str=stylesone_str.replace(classItemNameRegExp,classItemName+"["+randomStr+"] {")}}return stylesone_str},parseTemplates:function(html,randomStr){var htmls=html.replace(/<!--[\w\W\r\n]*?-->/gmi,"");var htmlslist=htmls.match(/<[^/].*?>/gmi);for(var i=0;i<htmlslist.length;i++){var replacestr=htmlslist[i].substr(0,htmlslist[i].length-1);replacestr=replacestr.replace(/(\s*$)/g,"");var replacestrxg=replacestr.substr(replacestr.length-1,1);if(replacestrxg=="/"){replacestr=replacestr.substr(0,replacestr.length-1);var newstr=replacestr+" "+randomStr+" />"}else{var newstr=replacestr+" "+randomStr+" >"}html=html.replace(htmlslist[i],newstr)}return html},parseimports:function(script,options){var importsurl=script.match(/import (['"])(?:(?!\1).)*?\1/gmi);if(importsurl!=null&&importsurl.length>0){for(var i=0;i<importsurl.length;i++){var importsurlval=importsurl[i].match(/(['"])(?:(?!\1).)*?\1/gmi);if(importsurlval!=null&&importsurlval.length>0){var imporsurlsrc=importsurlval[0].replace(/^["|'](.*)["|']$/gmi,"$1")}else{var imporsurlsrc=""}if(imporsurlsrc!=""){var imporurlspos=imporsurlsrc.split("/");var filenamestrurl=imporurlspos[imporurlspos.length-1];if(filenamestrurl.split("?")!=null&&filenamestrurl.split("?").length>1){filenamestrurl=filenamestrurl.split("?")[0]}var imporsurlcpp=filenamestrurl.split(".");if(imporsurlcpp.length<2){var importurltype=""}else{var importurltype=imporsurlcpp[imporsurlcpp.length-1].toLowerCase()}if(importurltype=="js"){this.loadJs([imporsurlsrc])}else{if(importurltype=="css"){this.loadCss([imporsurlsrc])}else{throw Error("Compile error: file import error, "+importurltype+" type file is not supported. CSS, JS are currently supported")}}}}}var imports=script.match(/import [\s\S]*? from (['"])(?:(?!\1).)*?\1/gmi);var scripttxt=script;if(imports!=null&&imports.length>0){for(var i=0;i<imports.length;i++){var importskey=imports[i].match(/import [\s\S]*? from/gmi);if(importskey!=null&&importskey.length>0){var importname=importskey[0].replace(/^(import .*?)+|( from)+$/gmi,"")}else{var importname=""}var importsval=imports[i].match(/(['"])(?:(?!\1).)*?\1/gmi);if(importsval!=null&&importsval.length>0){var imporssrc=importsval[0].replace(/^["|'](.*)["|']$/gmi,"$1")}else{var imporssrc=""}if(importname!=""&&imporssrc!=""){var imporspos=imporssrc.split("/");var filenamestr=imporspos[imporspos.length-1];if(filenamestr.split("?")!=null&&filenamestr.split("?").length>1){filenamestr=filenamestr.split("?")[0]}var imporssrcpp=filenamestr.split(".");if(imporssrcpp.length<2){var importtype="vue"}else{var importtype=imporssrcpp[imporssrcpp.length-1].toLowerCase()}if(importtype=="vue"||importtype=="html"){if(importname.match(/^[a-zA-Z\$_][a-zA-Z\d_]*$/)==null){throw new Error("Compile error: The name of "+importname+" is malformed. Please check the syntax："+imports[i])}var scriptsstrRegExp=new RegExp(imports[i],"gmi");scripttxt=scripttxt.replace(imports[i],"var "+importname+" = wmui.loadVue('"+imporssrc+"')");var scriptstrsregexp=new RegExp("Vue.use(.*?"+importname+".*)","gmi");var vueusestrs=scripttxt.match(scriptstrsregexp);if(vueusestrs!=null&&vueusestrs.length>0){var vueusestr=vueusestrs.join("").replace(scriptstrsregexp,'Vue.component("'+importname+'",wmui.loadVue("'+imporssrc+'"));');if(imporssrcpp.length<2){var vueusestr=vueusestrs.join("").replace(scriptstrsregexp,'Vue.component("'+importname+'",wmui.loadVue("'+imporssrc+'.vue"));')}scripttxt=scripttxt.replace(scriptstrsregexp,vueusestr)}}else{if(importtype=="js"){options[importname]=this.loadJs([imporssrc])}else{if(importtype=="css"){options[importname]=this.loadCss([imporssrc])}else{throw Error("Compile error: file import error, "+importtype+" type file is not supported. CSS, JS ,html and Vue are currently supported")}}}}}}return{scripttxt:scripttxt,options:options}},loadVue:function(url,options){var target=this;return function(resolve,reject){target.ajax({method:"get",url:url,data:{_loadVue:new Date().getTime(),_callback:window.location.href},async:true,success:function(message){var options=target.parseComponent(url,message,options);resolve(options)}})}},ajax:function(config){config=config||{};config.method=config.method.toUpperCase()||"GET"||"get";config.url=config.url||"";config.async=config.async===false?false:true;config.dataType=config.dataType||"text";config.contentType=config.contentType||"application/x-www-form-urlencoded;charset=utf-8";config.data=config.data||null;function getXmlHttp(){var obj=null;if(window.XMLHttpRequest){obj=new XMLHttpRequest()}if(window.ActiveXObject){try{obj=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){try{obj=new ActiveXObject("msxml2.XMLHTTP")}catch(ex){}}}return obj}var xmlHttp=getXmlHttp();var postData=getUrlParama(config.data);if(config.contentType==="application/json;charset=utf-8"&&config.dataType==="json"){postData=JSON.stringify(config.data)}if(config.method==="POST"||config.method==="post"){xmlHttp.open(config.method,config.url,config.async);
if(config.contentType==="application/json;charset=utf-8"&&config.dataType==="json"){xmlHttp.setRequestHeader("Content-Type","multipart/form-data")}else{xmlHttp.setRequestHeader("Content-Type",config.contentType)}}else{if(config.method==="GET"||config.method==="get"){if(config.contentType==="application/json;charset=utf-8"&&config.dataType==="json"){xmlHttp.open(config.method,config.url+"?GetJson="+encodeURIComponent(postData),config.async)}else{postData=config.url.indexOf("?")>=0?"&"+postData:"?"+postData;xmlHttp.open(config.method,config.url+postData,config.async)}postData=null}}xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4){var status=xmlHttp.status;if(status>=200&&status<300||xhr.status==304){config.success&&config.success(xmlHttp.responseText)}else{config.error&&config.error(status)}}};xmlHttp.send(postData);function getUrlParama(data){var params=[];for(var key in data){params.push(encodeURIComponent(key)+"="+encodeURIComponent(data[key]))}return params.join("&")}},loadJsCode:function(code){var script=document.createElement("script");script.type="text/javascript";try{script.appendChild(document.createTextNode(code))}catch(ex){script.text=code}var docres=document.getElementsByTagName("head")[0].appendChild(script);if(docres){document.getElementsByTagName("head")[0].removeChild(script)}},loadCssCode:function(code){var style=document.createElement("style");style.type="text/css";try{style.appendChild(document.createTextNode(code))}catch(ex){style.text=code}document.getElementsByTagName("head")[0].appendChild(style)},loadJs:function(src,callback,el){function arraySync(bsFunc,ar){var callback=arguments[arguments.length-1];if(ar.length==0){callback(0,[]);return}var sendErr=false;var finishNum=ar.length;var result=[];var args=[0,0];for(var index=2;index<arguments.length-1;++index){args.push(arguments[index])}args.push(function(err,r){if(err){if(!sendErr){sendErr=true;callback(err)}return}--finishNum;result[r.i]=r.v;if(finishNum==0){callback(0,result)}});for(var i=0;i<ar.length;++i){args[0]=ar[i];args[1]=i;bsFunc.apply(null,args)}}var removelist=[];arraySync(function(one,i,c){var cur_script=document.createElement("script");cur_script.type="text/javascript";cur_script.src=one;cur_script.addEventListener("load",function(){c(0,{i:i,v:{}})},false);removelist.push(cur_script);if(el!=undefined&&el!=""){document.getElementById(el).appendChild(cur_script)}else{document.head.appendChild(cur_script)}},src,function(err,r){for(var i=0;i<removelist.length;i++){if(el!=undefined&&el!=""){document.getElementById(el).removeChild(removelist[i])}else{document.head.removeChild(removelist[i])}}removelist=null;if(typeof(callback)!="undefined"){if(err){callback(err.message)}else{callback("js-load-ok")}}});return this.loadJs},loadCss:function(url){if(!url||url.length===0){throw new Error('argument "url" is required !')}var head=document.getElementsByTagName("head")[0];var link=document.createElement("link");link.href=url;link.rel="stylesheet";link.type="text/css";head.appendChild(link)},objassign:function(objone,objtwo){if(typeof Object.assign!="function"){Object.assign=function(target){if(target==null){throw new TypeError("Cannot convert undefined or null to object")}target=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!=null){for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}}return target}}return Object.assign(objone,objtwo)},cache:function(key,value,time){if(typeof key!="undefined"&&key!=null&&typeof value!="undefined"&&value!=null){if(typeof time!=="undefined"&&time!=null){var expirse=Number(Math.round(new Date()/1000))+Number(time);var setdata={value:value,expirse:expirse};window.localStorage.setItem(key,JSON.stringify(setdata))}else{var setdata={value:value};window.localStorage.setItem(key,JSON.stringify(setdata))}}else{if(typeof key!=="undefined"&&key!==null&&typeof value==="undefined"){var getvalue=JSON.parse(window.localStorage.getItem(key));if(getvalue&&getvalue!=undefined&&getvalue!=null){if(getvalue.expirse!=undefined&&getvalue.expirse!=null&&getvalue.expirse<Math.round(new Date()/1000)){window.localStorage.removeItem(key);return""}else{return getvalue.value}}return""}else{if(typeof key!=="undefined"&&key!==null&&typeof value!=="undefined"&&value===null){window.localStorage.removeItem(key)}else{window.localStorage.clear()}}}}};return wmui}));